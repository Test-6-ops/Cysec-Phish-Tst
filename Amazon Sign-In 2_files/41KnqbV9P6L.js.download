P.register("cvfVersion",function(){return{version:"0.1.0.0-2025-04-15"}});"use strict";
P.when("A","cvfFormDataGenerator","cvf-client-side-counters-util","ready").register("cvf-account-switcher",function(a,g,b){function m(b,d){b.preventDefault();var c=g.retrieveFormData(b.target),l=c.inputData.serializeArray();l.push(f(b.target));a.ajax(window.location.protocol+"//"+window.location.host+c.requestPath,{method:"POST",params:l,success:d,error:e})}function f(a){a=l(a);var b=a.attr("name");b||(b=a.closest(".cvf-account-switcher-sign-out-link").attr("data-name"));var d=a.attr("value");d||
(d=a.closest(".cvf-account-switcher-sign-out-link").attr("data-value"));return{name:b,value:d}}function e(b,d,c){a.trigger(x.error,c)}function c(a){var b=/([^@\s]+)@([a-zA-Z0-9_-]+)(\.[a-zA-Z0-9._-]+)/ig.exec(a);if(null!==b){a=b[1];a=l.trim(a);var d=a.length;if(1!==d){for(var c=a.charAt(0),e=0;e<d-2;e++)c+="*";a=c+=a.charAt(d-1)}a+="@";c=b[2];c=l.trim(c);d=c.length;c=c.charAt(0);for(e=0;e<d-1;e++)c+="*";return a+c+b[3]}b=l.trim(a);a=b.length;if(!(4>=a)){d="";for(c=0;c<a-4;c++)d+="*";b=d+b.substr(a-
4,a-1)}return b}function d(){0===l(".cvf-account-switcher-check-mark:visible").length&&(l(".cvf-account-switcher-check-mark-area").remove(),l(".cvf-account-switcher-profile-details").toggleClass("cvf-account-switcher-profile-details cvf-account-switcher-profile-details-after-account-removed"))}function h(d){var c=new URLSearchParams(window.location.search);c.delete("switch_to_cid");c.has("errorCodes")||c.append("errorCodes","ACCOUNT_SWITCH_FAILED");b.addMetricCount(d);a.trigger(x.error,"automaticAccountSwitchFailure");
window.location.search=c}function p(){if(0!==l(".cvf-switch-to-cid").length)try{b.startMetricTimer(r.latency);var c=l(".cvf-switch-to-cid")[0].getAttribute("value");l(".cvf-automatic-switch-"+c)[0].click();setTimeout(function(){h(r.failureTimeout)},7E3);a.trigger(x.success,"automaticAccountSwitchSuccess");return!0}catch(y){h(r.failureClicking)}finally{b.endMetricTimer(r.latency)}return!1}var l=a.$,x={success:"cvf:account_switcher:success",error:"cvf:account_switcher:error"},r={latency:"AutomaticAccountSwitch_Latency",
failureClicking:"AutomaticAccountSwitch_FailureClicking",failureTimeout:"AutomaticAccountSwitch_FailureTimeout"};(function(){var a=l("#ap-account-switcher-container")[0],b=window.MutationObserver||window.WebKitMutationObserver;if(void 0!==a&&void 0!==b){var c=new b(function(a){for(var b=0;b<a.length;b++)if(null!==a[b].addedNodes){p()||d();c.disconnect();break}});c.observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}})();(function(){l(".cvf-account-switcher-sign-out-link").live("click",
function(b){m(b,function(e){if(e.redirectUrl)window.location=e.redirectUrl,a.trigger("cvf:account_switcher","redirectOnSignOut");else if(e.succeeded){var f="."+l(b.target).attr("class").match(/cvf-account-switcher-account-group-\w+/g)[0];l(f+"-hide").hide();l(f+"-name").text(l("#cvf-account-switcher-sign-out-replace-text").text());l(f+"-claim").text(c(l(f+"-claim").text()));l(f+"-image").replaceWith(l("\x3cdiv /\x3e").append(l("#cvf-account-switcher-sign-out-replace-image").clone().removeClass("cvf-hidden")).html());
l(f+"-button").removeClass("cvf-widget-btn-val cvf-widget-btn-verify-account-switcher");e=e.switchedAccountId;void 0!==e&&l(".cvf-account-switcher-account-group-"+e+"-check-mark").show();d();window.location.reload()}else a.trigger(x.error,e)})})})();return{automaticAccountSwitch:p}});"use strict";
P.when("A","cvfInputValidatorConfig","ready").register("cvfInputValidator",function(a,g){return{getValidationResult:function(b){var m=!0,f=[],e=[];g.forEach(function(c){var d=a.$(c.invalidFieldAlertSelector),h=a.$(c.emptyFieldAlertSelector);c=b.find(c.inputSelector);c[0].required&&!c.val().trim()?(m=!1,0<h.length?(f.push(h),0<d.length&&e.push(d)):0<d.length&&f.push(d)):(0<h.length&&e.push(h),h=c[0].checkValidity&&!c[0].checkValidity(),m=m&&!h,d.length&&(h?f.push(d):e.push(d)))});return{isValid:m,
activeAlerts:f,inactiveAlerts:e}}}});"use strict";P.when("A","ready").register("cvfInputValidatorConfig",function(a){return[{inputSelector:".cvf-widget-input-code",invalidFieldAlertSelector:".cvf-widget-invalid-code-alert",emptyFieldAlertSelector:".cvf-widget-empty-field-alert"}]});P.register("a-sheet-wrapper",function(){return null});"use strict";
P.when("A","cvfFormDataGenerator","ready").register("cvfCaptcha",function(a,g){a=a.$;0===a(".cvf-widget-input-captcha").children("input").length?(a(".cvf-widget-input-captcha").attr("autocapitalize","off"),a(".cvf-widget-input-captcha").attr("autocorrect","off")):(a(".cvf-widget-input-captcha").children("input").attr("autocapitalize","off"),a(".cvf-widget-input-captcha").children("input").attr("autocorrect","off"))});"use strict";
P.when("A").register("cvf-client-side-counters-util",function(a){function g(a,g){var b=window.ue;b&&"function"===typeof b.count&&(g||(g=(b.count(a)||0)+1),b.count(a,g))}return{incrementCounter:function(a){g(a)},insertCounter:g,addMetricCount:function(a){window.ue&&"function"===typeof window.ue.count&&window.ue.count(a,1)},startMetricTimer:function(a){window.uet&&"function"===typeof window.uet&&window.uet("bb",a,{wb:1})},endMetricTimer:function(a){window.uex&&"function"===typeof window.uex&&window.uex("ld",
a,{wb:1})}}});
P.when("A","3p-promise","a-alert","codeResendTimer","cvf-client-side-counters-util","sms-retriever-handler","web-otp-handler","ready").execute("client-sms-request-controller",function(a,g,b,m,f,e,c){function d(){a.show("#cvf-otp-autoread-progress");f.incrementCounter(u.SHOW_AUTOREAD_WIDGET);var b=p();k.delegate("#cvf-input-code","input",function(){h(b)})}function h(b){clearTimeout(b);a.hide("#cvf-otp-autoread-progress");b=n("#cvf-auto-read-status");var c=this.abortController;c&&c.abort("Manual user entry");b.val()!==
v.AUTOREAD_TIMEOUT&&b.val()!==v.AUTOREAD_SUCCESS&&(f.incrementCounter(u.CANCEL_AUTOREAD_WIDGET),b.val(v.AUTOREAD_CANCELLED))}function p(){return setTimeout(function(){l()},3E4)}function l(){var c=n("#cvf-auto-read-status");a.hide("#cvf-otp-autoread-progress");f.incrementCounter(u.AUTOREAD_WIDGET_TIMEOUT);c.val(v.AUTOREAD_TIMEOUT);b("#cvf-otp-autoread-timeout").show();(c=this.abortController)&&c.abort("Auto-read OTP timeout")}function x(b){t=b;b=n("#cvf-auto-read-status");z&&b.val()!==v.AUTOREAD_TIMEOUT&&
b.val()!==v.AUTOREAD_CANCELLED&&(b=t,n("#cvf-auto-read-status").val(v.AUTOREAD_SUCCESS),n("#cvf-input-code").val(b).trigger("input"),a.show("#cvf-otp-autoread-success"),k.submit())}function r(a){m.createTimer(Number(a.timeRemaining),n("#resend-timer-message-id").val(),n("#resend-timer-complete-id").val().replace(/"/g,""),"timer","timer",!1);a=n("#wait-resend-auto-read");a.submit(function(a){a.preventDefault()});n(".wait-one-minute-continue").click(function(){w.location.reload()});a.removeClass("aok-hidden");
k.addClass("aok-hidden")}function B(){b("#otp-request-failed-alert").show();n("#cvf-input-code").attr("disabled","disabled").addClass("a-form-disabled");n("#cvf-submit-otp-button").addClass("a-button-disabled");n("#cvf-resend-link").unbind().click(function(){w.location.reload()})}function y(b){a.get(b,{success:function(a){if(a.wait)f.incrementCounter(u.WAIT_RESEND),r(a);else if(a.redirect)f.incrementCounter(u.REDIRECT),w.location.replace(a.redirect);else if(a=a.smsFormat){if(f.incrementCounter(u.RECEIVED_FORMAT+
":"+a),"androidAutoReadSmsWithAppHash"===a||"androidAutoReadSmsWithWebOtp"===a)z=!0,d(),t&&x(t)}else f.incrementCounter(u.FORMAT_NOT_RECEIVED),console.error("Failed to receive sms format")},error:function(a,b,c){f.incrementCounter(u.AJAX_SMS_REQUEST_FAILED+":"+c);B();console.error("Ajax request failed",c)}})}var n=a.$,w=this;e=[e,c];var v=Object.freeze({AUTOREAD_SUCCESS:"autoreadWidgetSuccess",AUTOREAD_CANCELLED:"autoreadWidgetCancelled",AUTOREAD_TIMEOUT:"autoreadWidgetTimeout"}),u=Object.freeze({SHOW_AUTOREAD_WIDGET:"OTPAutoReadShowWidget",
CANCEL_AUTOREAD_WIDGET:"OTPAutoReadCanceWidgetForManualInput",AUTOREAD_WIDGET_TIMEOUT:"OTPAutoReadWidgetTimeout",RECEIVED_FORMAT:"OTPAutoReadReceivedFormat",FORMAT_NOT_RECEIVED:"OTPAutoReadFormatNotReceived",REDIRECT:"OTPAutoReadClientRedirect",AJAX_SMS_REQUEST_FAILED:"OTPAutoReadAjaxSmsRequestFailed",WAIT_RESEND:"OTPAutoReadWaitResend"});if((c=a.state("autoReadAttrs"))&&c.isClientDrivenOtpSendingEnabled){var A=c.arbParam;if(A){var k=n("#verification-code-form");if(0!==k.length){var t=null,z=!1;a.capabilities.android?
(e=e.map(function(a){return a.isEnabled().then(function(b){return b?a.registerListener(x).then(function(a){return a}):{}})}),g.all(e).then(function(a){var b=[],c={};a.forEach(function(a){a.handlerCapability&&b.push(a.handlerCapability);a.handlerQueryParams&&n.extend(c,a.handlerQueryParams)});a={arb:A,mode:"page_ajax",sendClientDrivenOtp:!0,capabilities:b.join()};n.extend(a,c);a=w.location.origin+"/ap/cvf/request?"+n.param(a);y(a)})):(g=w.location.origin+"/ap/cvf/request?"+n.param({arb:A,mode:"page_ajax",
sendClientDrivenOtp:!0}),y(g))}}}});"use strict";
P.when("A","ready").register("codeResendTimer",function(a){function g(g,f,e,c,d,h){var m=(new Date).getTime();h&&(clearInterval(b),window.localStorage.removeItem("icaCVFTimeId"));b=setInterval(function(){var l=(new Date).getTime()-m,p=g-l;h&&window.localStorage.setItem("icaCVFTimeId",p);if(0>=p)clearInterval(b),h&&window.localStorage.removeItem("icaCVFTimeId"),h?(a.$("#"+c).hide(),a.$("#"+d).show()):a.$("#"+d).html(e);else{var r=f.split(" +timeleft+ ");l=r[0]?r[0].replace(/"/g,""):"";r=r[1]?r[1].replace(/"/g,
""):"";h?(p=(new Date(p)).toISOString().slice(14,19),l=l+p+r):l=l+Math.floor(p/1E3)+r;a.$("#"+c).html(l)}},100)}var b;return{createTimer:function(a,b,e,c,d,h){return new g(a,b,e,c,d,h)},showTimer:function(){a.$("#cvf-resend-link").hide();a.$("#cvf-resend-text").removeClass("cvf-hidden")}}});"use strict";
P.when("A","cvfFormDataGenerator","ready").execute(function(a,g){var b=a.$;b(".cvf-widget-btn-val").click(function(a){var f=b(a.target).closest(".cvf-widget-form");a=g.getNameValue(b(a.target));f.append('\x3cinput type\x3d"hidden" name\x3d"'+a.name+'" value\x3d"'+a.value+'"\x3e').submit()})});"use strict";
P.when("A","cvfVersion","cvfFormDataGenerator","cvfInputValidator","ready").register("cvf",function(a,g,b,m){function f(e){function l(b){"string"===typeof k.options.widgetMetricsScope&&"function"===typeof window.uet&&window.uex("ld",k.options.widgetMetricsScope,{wb:1});k.options.spinnerTarget&&k.options.spinnerTarget.hide();if(b.hasOwnProperty("error"))a.trigger(t.error,b.error);else if(b.redirectUrl)window.location=b.redirectUrl;else if(b.redirect){a.trigger(t.success,b.token,b.status,b.redirect);
if(k.options.showICALoadingAnimationOnSuccess){var d=c("#in-context-auth-loading-animation").prop("outerHTML");q.html(d)}k.options.autoDestroy?k.destroy():(c(".cvf-widget-alert").hide(),b.status?c(".cvf-widget-status-success").show():c(".cvf-widget-status-error").show(),A());a.trigger("cvf:verification:complete",b.status);q.find(".cvf-widget-btn").unbind("click",f);q.find(".cvf-widget-btn-val").unbind("click",f);a.off(t.success);a.off(t.error);a.off(t.content)}else q.html(b.replace(/<form/g,"\x3cdiv").replace(/<\/form/g,
"\x3c/div")),d=c(".cvf-widget-form-keep").clone().empty(),b=c(".cvf-widget-form-keep").children().clone(!0,!0),d=(new String(d.prop("outerHTML"))).replace(/<div/g,"\x3cform").replace(/<\/div/g,"\x3c/form"),c(".cvf-widget-form-keep").replaceWith(d),c(".cvf-widget-form-keep").html(b),w(),a.trigger(t.content)}function f(d,e,f){d.preventDefault();c(".cvf-widget-alert").hide();k.options.spinnerTarget&&k.options.spinnerTarget.show();var g=b.retrieveFormData(d.target,f);if(B()){if(k.options.showICAClaimUIOnClickChangeLink){k.options.showICAClaimUIOnClickChangeLink=
!1;k.options.spinnerTarget&&k.options.spinnerTarget.hide();d=c("#change-signin-claim-link-id").val();a.ajax(d,{method:"GET",dataType:"html",success:function(b){a.trigger("in-context-auth-content-update-event",b)},error:function(){c("#cvf-change-contact-link").hide();console.error("AJAX request to /ax/claim/ica failed.",this.error)}});return}if(f)q.find(".cvf-widget-input").removeClass("cvf-widget-input-error");else if(f=m.getValidationResult(g.form),f.inactiveAlerts.forEach(function(a){a.hide()}),
f.activeAlerts.forEach(function(a){a.show()}),f.isValid)q.find(".cvf-widget-input").removeClass("cvf-widget-input-error");else{k.options.spinnerTarget&&k.options.spinnerTarget.hide();q.find(".cvf-widget-input").addClass("cvf-widget-input-error");y();n();return}}f=g.inputData.serializeArray();e&&f.push(b.getNameValue(d.target));a.ajax(z+g.requestPath,{method:"POST",params:f,success:l,error:u})}function p(a){13===a.keyCode&&f(a)}function B(){return 0<q.find('input[name\x3d"is_in_context_auth"]').length}
function y(){q.find('input[name\x3d"code"]').focus()}function n(){q.find('input[name\x3d"code"]').keypress(p)}function w(){q.find(".cvf-widget-btn").click(function(a){f(a,!1)});q.find(".cvf-widget-btn-val").click(function(a){f(a,!0)});B()||y();n();q.find(".cvf-widget-v2-link-resend").click(function(a){f(a,!1,!0)});q.find("#cvf-signin-with-password").click(function(a){a.preventDefault();q.find("#cvf-signin-with-password-instead-form").submit()});q.find(".cvf-widget-v2-change-contact-link").click(function(a){k.options.showICAClaimUIOnClickChangeLink=
!0;f(a,!1)})}function v(b){return function(c,d,e){"timeout"!==d||3<=C?a.trigger(t.error,e):a.delay(b,10*C++)}}function u(b,c,d){k.options.spinnerTarget&&k.options.spinnerTarget.hide();a.trigger(t.error,d)}function A(){c.each(q.find("input"),function(a,b){a=c(b);a.attr("disabled","disabled");a.hasClass("a-input-text")?a.addClass("a-form-disabled"):a.hasClass("a-button-input")?a.closest(".a-button").addClass("a-button-disabled"):a.closest(".a-input-text-wrapper").length&&a.closest(".a-input-text-wrapper").addClass("a-form-disabled")});
c.each(q.find("a"),function(a,b){a=c(b);a.hasClass("cvf-widget-link-disable-target")&&a.addClass("cvf-link-disabled")})}var k=this;h++;var t={success:"cvf:"+h+":success",error:"cvf:"+h+":error",content:"cvf:"+h+":content"};k.options={};c.extend(k.options,d,e);(function(a){if(1!==c(a.target).length)throw Error("The CVF widget requires a unique element.");if(!c.isFunction(a.onSuccess))throw Error("The CVF widget requires a success callback function.");if(!c.isFunction(a.onError))throw Error("The CVF widget requires an error callback function.");
})(k.options);var z=k.options.server,q=c(k.options.target);a.on(t.success,k.options.onSuccess);a.on(t.error,k.options.onError);a.on(t.content,k.options.onContent);k.start=function(){var b=z+"/ap/cvf/request.embed",d=k.options.requestToken,e=k.options.requestArbToken,f=k.options.associationHandle,h=k.options.language,p=0===c.trim(d).length,m=0===c.trim(e).length;if(p&&m)throw Error("The CVF widget requires a request token or arb token.");p=0!==c.trim(f).length;var r=0!==c.trim(h).length,n={};m?n.requestToken=
d:n.arb=e;n.CVFVersion=g.version;n.AUIVersion=P.AUI_BUILD_DATE;r&&(n.language=h);p&&(n["openid.assoc_handle"]=f);"string"===typeof k.options.widgetMetricsScope&&"function"===typeof window.uet&&window.uet("bb",k.options.widgetMetricsScope,{wb:1});a.ajax(b,{method:"GET",params:n,success:l,error:v(k.start)})};k.destroy=function(){q.html("")};w();var C=0;k.options.autoStart&&k.start()}function e(a){return new f(a)}var c=a.$,d={server:"",target:void 0,requestToken:void 0,requestArbToken:void 0,onSuccess:void 0,
onError:void 0,onContent:function(){},spinnerTarget:void 0,autoStart:!0,autoDestroy:!0,widgetMetricsScope:void 0,associationHandle:void 0,language:void 0,showICALoadingAnimationOnSuccess:!1,showICAClaimUIOnClickChangeLink:!1},h=0;a.on("cvf:verification:request",function(b){var d=c("#"+b),f=d.data("token"),g=d.data("spinnerId");g=c("#"+g);e({target:d,spinnerTarget:g,requestToken:f,onSuccess:function(d,c,e){a.trigger("cvf:verification:complete:"+b,d,c,e)},onError:function(d){a.trigger("cvf:verification:error:"+
b,d)},autoStart:!0,autoDestroy:!1})});return{create:e}});"use strict";
P.when("A","ready").register("cvfFormDataGenerator",function(a){var g=a.$;return{retrieveFormData:function(a,m){a=g(a).closest(".cvf-widget-form");m&&(a=g(".cvf-widget-form-resend"));return{requestPath:a.data("use-only-form-action")?a.attr("action"):"/ap/cvf/"+a.attr("action")+".embed",inputData:a.find(".cvf-widget-input,.cvf-widget-hidden-fields,.cvf-widget-input :input"),form:a}},getNameValue:function(a){a=g(a);var b=a.attr("name");b||(b=a.closest(".cvf-widget-btn-val").attr("data-name"));var f=
a.attr("value");f||(f=a.closest(".cvf-widget-btn-val").attr("data-value"));return{name:b,value:f}}}});"use strict";P.when("jQuery","ready").execute(function(a){var g=a(".cvf-widget-btn");g.closest("form").bind("submit",function(){g.addClass("a-button-disabled")})});"use strict";
P.when("A","cvf","ready").execute(function(a,g){var b=a.$;b(document).ready(function(){function a(a,b,d){window.location=d;console.log("Client Side: "+a)}function f(a){console.log(a)}var e=b(".cvf-widget-spinner"),c=b("#cvf-widget-content");if(1===c.length){var d=b('[name\x3d"requestToken"]').first().attr("value");g.create({target:c,spinnerTarget:e,requestToken:d,onSuccess:a,onError:f,autoStart:!1})}})});"use strict";
P.when("A","ready").register("phoneFormField",function(a){function g(){a:{for(var a=b("select[name\x3d'cvf_phone_cc']").val()||"",c=0;c<f.length;c++){var d=f[c];if(a.toUpperCase()===d){b("#mobileClaimDisclosureMessageV2").removeClass("a-hidden aok-hidden").show();b("#mobileClaimDisclosureMessage").addClass("aok-hidden").hide();b("#mobileClaimDisclosureMessageRelaxed").addClass("aok-hidden").hide();break a}}for(c=0;c<m.length;c++)if(d=m[c],a.toUpperCase()===d){b("#mobileClaimDisclosureMessage").removeClass("a-hidden aok-hidden").show();
b("#mobileClaimDisclosureMessageV2").addClass("aok-hidden").hide();b("#mobileClaimDisclosureMessageRelaxed").addClass("aok-hidden").hide();break a}b("#mobileClaimDisclosureMessageRelaxed").removeClass("a-hidden aok-hidden").show();b("#mobileClaimDisclosureMessage").addClass("aok-hidden").hide();b("#mobileClaimDisclosureMessageV2").addClass("aok-hidden").hide()}}var b=a.$,m=["CA","FR"],f=["US"];0<b("select[name\x3d'cvf_phone_cc']").length&&0<b("#mobileClaimDisclosureMessage").length&&0<b("#mobileClaimDisclosureMessageRelaxed").length&&
0<b("#mobileClaimDisclosureMessageV2").length&&(g(),b("select[name\x3d'cvf_phone_cc']").change(g))});"use strict";P.when("A","ready").execute(function(a){function g(a){var b=a.value.match(m);b&&1===b.length?a.setAttribute("aria-invalid","false"):a.setAttribute("aria-invalid","true")}function b(a){a.addEventListener("change",function(b){g(a)})}var m=/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g;a=a.$("input[id\x3d'cvfEmail']");a.length&&(b(a[0]),g(a[0]))});"use strict";
P.when("A").execute(function(a){a.declarative("auth-popup","click",function(a){var b=a.data;a=a.$target.closest("a")[0];(b=window.open(a.href,a.target,b.windowOptions))&&b.focus()})});P.register("android-sms-otp-parser",function(){return{parseOtpCode:function(a){if(a&&(a=a.match(/(([\s\S]*[^0-9])|(^))([0-9]{4,6})[^0-9][\s\S]*[a-zA-Z0-9+\\\/]{11}/)||[],0<a.length))return a[4]}}});
P.when("A","mobile-auth-platform","3p-promise","android-sms-otp-parser","cvf-client-side-counters-util","ready").register("sms-retriever-handler",function(a,g,b,m,f){function e(a){(h=a.isSupported)?f.incrementCounter(d.ENABLED):f.incrementCounter(d.DISABLED);p={appHash:a.appHash}}function c(){return new b(function(a){p?a(p):g.isSmsRetrieverEnabled(function(b){e(b);a(p)})})}var d=Object.freeze({ENABLED:"SmsRetrieverEnabled",DISABLED:"SmsRetrieverDisabled",SMS_LISTENER_FAILED:"SmsRetrieverListenerFailedToRegister",
RECEIVED_INVALID_SMS:"SmsRetrieverListenerReceivedInvalidSms",RECEIVED_VALID_SMS:"SmsRetrieverListenerReceivedValidSms"}),h=null,p=null;return{isEnabled:function(){return new b(function(a){null!==h?a(h):g.isSmsRetrieverEnabled(function(b){e(b);a(h)})})},registerListener:function(a){return new b(function(b){g.registerMAPSmsReceiver(function(b){b.isRegistered?(b=m.parseOtpCode(b.sms))?(f.incrementCounter(d.RECEIVED_VALID_SMS),a(b)):f.incrementCounter(d.RECEIVED_INVALID_SMS):f.incrementCounter(d.SMS_LISTENER_FAILED)});
c().then(function(a){h?b({handlerCapability:"smsRetriever",handlerQueryParams:a}):b({})})})}}});"use strict";
P.when("A","a-spinner","ready").execute(function(a,g){function b(){e(".otp-input-box").attr("disabled","disabled");e("input[name\x3d'code']").val(m());(null!==e(".otp-input-box-container").data("isembed")?e(".otp-input-box-container").data("isembed"):1)?e(".cvf-widget-btn-verify").click():(a.capabilities.isAmazonApp||g("#otp-input-spinner").show(),e("#verification-code-form").submit())}function m(){var a="";e("input[name^\x3dotc]").each(function(b){a+=e(this).val()});return a}function f(){e(".cvf-widget-alert").is(":visible")&&
(e(".otp-input-box").removeClass("otp-input-box-alert"),e(".cvf-widget-alert").hide())}var e=a.$,c=/^\d+$/;a.declarative("otp-inputbox-handler","focusin",function(a){a=a.$target;a.is(".otp-input-box")&&(a.attr("name").match("otc-1")||""===a.prev().val()&&a.prev().focus())});a.declarative("otp-inputbox-handler","keyup",function(a){var d=a.$event;a=a.$target;a.is(".otp-input-box")&&(d=d.which||d.keyCode,-1===[16,9,224,18,17].indexOf(d))&&(-1!==[8,37,46].indexOf(d)?a.prev()&&!a.attr("name").match("otc-1")&&
(a.val(""),a.prev().select()):c.test(a.val())?a.attr("name").match("otc-6")?b():a.next()&&(f(),a.next().select()):a.val(""))});e(".otp-input-box").live("input",function(a){a=e(a.target);var c=a.val();f();if(1!==c.length)for(var d=0;d<c.length;d++){a.val(c.charAt(d));if(a.attr("name").match("otc-6")){b();break}a=a.next();a.focus()}});a.declarative("otp-inputbox-handler","click",function(){e("input[name^\x3dotc]").each(function(a){""===e(this).val()&&e(this).focus()})})});"use strict";
P.when("A","ready").execute(function(a){function g(a,b){b=Array.from((new Intl.NumberFormat(b,{useGrouping:!1})).format(9876543210)).reverse();var c=new Map(b.map(function(a,b){return[a,b]}));return a.split("").map(function(a){return c.has(a)?c.get(a):a}).join("")}var b=a.$,m=["ar-AE-u-nu-arab"];(a=a.state("convert_to_en_digits"))&&!0===a.enabled&&b("#ap_email, #ap_email_login, #auth-pv-enter-code, #cvf-input-code").keyup(function(){if(this.value){var a=this;m.map(function(b){a.value=g(a.value,b)})}})});
P.when("A","IdentityCommon","ready").register("twoWaySms",function(a,g){function b(){var a=parseInt(e("input#clickCountHidden").val());e("input#clickCountHidden").val(a+1)}function m(){var a=parseInt(e("input#clickCountHidden").val());1===parseInt(e("input#clickCountHidden").val())&&e("#clickCreationTimeHidden").val(Date.now());var b=parseInt(e("input#clickCreationTimeHidden").val());b=Date.now()-b;4<=a||15E3<b?(c.publishCounter(h.CUSTOMER_SHOWN_ERROR_FOR_INCORRECT_SMS,1,d),e("#defaultAlert").css("display",
"none"),e("#notReceivedWarningAlert").css("display","none"),e("#notReceivedErrorAlert").css("display","block")):(c.publishCounter(h.CUSTOMER_REQUESTED_T0_WAIT,1,d),e("#defaultAlert").css("display","none"),e("#notReceivedWarningAlert").css("display","block"),e("#notReceivedErrorAlert").css("display","none"))}function f(a){var b=parseInt(e("input#clickCountHidden").val());c.publishCounter(a,b,d)}var e=a.$,c=g.getMetricsPublisher("IdentityService.CVF.TwoWaySms","ChimeraWebsite","2waySms");g=g.getPlatformDetector();
var d={metricsDimension:{os:g.getOSName(),browser:g.getBrowserName()}},h=Object.freeze({INCOMING_SMS_STATUS_POLLED:"IncomingStatusPolled",INCOMING_SMS_PASSED:"SolvedIncomingSMS",INCOMING_SMS_PENDING:"PendingIncomingSMS",FAIL_TO_POLL_PENDING_INCOMING_SMS_STATUS:"FailToPollIncomingSmsStatus",CUSTOMER_REQUESTED_T0_WAIT:"CustomerRequestedToWait",CUSTOMER_SHOWN_ERROR_FOR_INCORRECT_SMS:"CustomerShownErrorForIncorrectSms",NUMBER_OF_CLICKS_DURING_TRANSACTION:"NumberOfClicksDuringTransaction",NUMBER_OF_CLICKS_ON_COMPLETION:"NumberOfClicksOnCompletion"});
e("#sent_an_incoming_sms").click(function(){b();c.publishCounter(h.INCOMING_SMS_STATUS_POLLED,1,d);a.ajax(e("#two-way-sms-one").attr("action")+"/pollIncomingSmsStatus",{method:"GET",params:e("#two-way-sms-one").serializeArray(),success:function(a){a=a.IncomingSmsChallengeStatus;"IncomingSMSValidated"===a||"OutgoingNotificationSent"===a?(c.publishCounter(h.INCOMING_SMS_PASSED,1,d),f(h.NUMBER_OF_CLICKS_ON_COMPLETION),e("#two-way-sms-one").submit()):(c.publishCounter(h.INCOMING_SMS_PENDING,1,d),m())},
error:function(a){m();c.publishCounter(h.FAIL_TO_POLL_PENDING_INCOMING_SMS_STATUS,1,d)}});m();f(h.NUMBER_OF_CLICKS_DURING_TRANSACTION)});return{}});
P.when("A","3p-promise","cvf-client-side-counters-util","ready").register("web-otp-handler",function(a,g,b){function m(a){return a?Object.values(e).some(function(b){return a.includes(b)}):!1}function f(){return new g(function(e){null===d&&((d=!(a.capabilities.isAmazonApp||m(h))&&"OTPCredential"in window)?b.incrementCounter(c.WEB_OTP_ENABLED):b.incrementCounter(c.WEB_OTP_DISABLED));e(d)})}var e=Object.freeze({AMZN_APP_ID_COOKIE_NAME:"amzn-app-id",AMZN_APP_CTXT_COOKIE_NAME:"amzn-app-ctxt"}),c=Object.freeze({WEB_OTP_ENABLED:"WebOtpEnabled",
WEB_OTP_DISABLED:"WebOtpDisabled",WEB_OTP_SMS_LISTENER_FAILED:"WebOtpListenerFailedToRegister",WEB_OTP_RECEIVED_INVALID_SMS:"WebOtpListenerReceivedInvalidSms",WEB_OTP_RECEIVED_VALID_SMS:"WebOtpListenerReceivedValidSms"}),d=null,h=document.cookie;return{isEnabled:f,registerListener:function(a){return new g(function(e){f().then(function(d){d?(window.abortController=new AbortController,navigator.credentials.get({otp:{transport:["sms"]},signal:window.abortController.signal}).then(function(d){(d=d.code)?
(b.incrementCounter(c.WEB_OTP_RECEIVED_VALID_SMS),a(d)):b.incrementCounter(c.WEB_OTP_RECEIVED_INVALID_SMS)}).catch(function(a){b.incrementCounter(c.WEB_OTP_RECEIVED_INVALID_SMS);console.error(a)})):b.incrementCounter(c.WEB_OTP_SMS_LISTENER_FAILED)});d?e({handlerCapability:"webOtp",handlerQueryParams:{}}):e({})})},abortController:window.abortController}});P.when("A","ready").execute(function(a){a.declarative("secondary-channel-link-click","click",function(){a.$(".cvf-widget-form-secondary-channel").submit()})});
"use strict";P.when("A","ready").execute(function(a){a.$(".cvf-autofocus").first().focus()});